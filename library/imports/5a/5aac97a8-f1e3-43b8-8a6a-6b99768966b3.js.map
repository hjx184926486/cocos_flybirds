{"version":3,"sources":["../../../../assets/Script/assets/Script/Handler.ts"],"names":[],"mappings":";;;;;AAAA,+BAA8B;AAC9B,6CAA4C;AAE5C,IAAM,EAAE,GAAI,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB;IAAA;IA2BA,CAAC;IAxBI,iBAAiB;IACH,aAAK,GAAnB,UAAoB,QAAQ;QAEzB,IAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,KAAK,EAAE,CAAC,GAAG,CAAC,WAAW,EAAC;YACtC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,8BAA8B,CAAC,CAAC;YACtE,WAAI,CAAC,CAAC,CAAC,WAAW,CAAC,EAAC,QAAQ,EAAE,8BAA8B,EAAG,CAAC,CAAC;YACjE,IAAG,OAAO,QAAQ,IAAI,UAAU,EAAC;gBAC7B,QAAQ,EAAE,CAAC;aACd;YACD,OAAO;SACV;QAED,EAAE,CAAC,KAAK,CAAC,EAAC,OAAO,EAAC,UAAA,GAAG;gBACjB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAClC,mBAAQ,CAAC,IAAI,CAAC,OAAO,EAAC,EAAC,IAAI,EAAC,GAAG,CAAC,IAAI,EAAC,EAAC,UAAC,KAAK,EAAC,GAAG;oBAC5C,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACtD,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACpD,WAAI,CAAC,CAAC,CAAC,WAAW,CAAC,EAAC,QAAQ,EAAE,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;oBAChD,IAAG,OAAO,QAAQ,IAAI,UAAU,EAAC;wBAC7B,QAAQ,EAAE,CAAC;qBACd;gBACL,CAAC,CAAC,CAAA;YACN,CAAC,EAAC,CAAC,CAAA;IACP,CAAC;IACL,cAAC;AAAD,CA3BA,AA2BC,IAAA;AA3BY,0BAAO","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import { User } from \"./User\";\nimport { HttpUtil } from \"./Utils/HttpUtil\";\n\nconst wx  = window[\"wx\"];\nexport class Handler{\n\n\n     /**用户登录,首次运行调用 */\n     public static login(feedback):void{\n       \n        if(cc.sys.platform !== cc.sys.WECHAT_GAME){\n            cc.sys.localStorage.setItem('openId', \"oIBzT5BFyVZeFtpA76bycj4as7KQ\");\n            User.I.setUserData({'openId': \"oIBzT5BFyVZeFtpA76bycj4as7KQ\"  });\n            if(typeof feedback == \"function\"){\n                feedback();\n            }\n            return;\n        }\n\n        wx.login({success:res=>{\n            console.log(\"登录口令code:\",res.code);\n            HttpUtil.post(\"login\",{code:res.code},(state,res)=>{\n                cc.sys.localStorage.setItem('openId', res.msg.openid);\n                cc.sys.localStorage.setItem('session', res.msg.key);\n                User.I.setUserData({'openId': res.msg.openid });\n                if(typeof feedback == \"function\"){\n                    feedback();\n                }\n            })\n        }})\n    }\n}"]}