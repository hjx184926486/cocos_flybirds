{"version":3,"sources":["../../../../assets/Script/assets/Script/Hero.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import {MainScene} from \"./MainScene\";\nimport { GameConfig } from \"./GameConfig\";\nimport { GameManager } from \"./GameManager\";\nimport { GAME_TYPE } from \"./GameManager\";\nimport { User } from \"./User\";\nconst {ccclass, property} = cc._decorator;\n\nenum skillOrRelife{\n    SKILL = 0,\n    RELIFE = 1\n}\n\n@ccclass\nexport  class Hero extends cc.Component {\n\n    @property(cc.Node)\n    private main: cc.Node = null;\n\n    @property( cc.Node )\n    reLifeView:cc.Node = null;\n\n    birdData:any;\n\n    protected horSpeed:number = GameConfig.SPEED; //水平移动速度\n    protected downSpeed:number = 0;  //下落速度\n\n    lateUpdate(){\n        this.heroMoveHor();\n        this.heroMoveVer();\n        this.changeRotation();\n    }\n    onCollisionEnter (other:any, self:any) {\n        if( other.tag == 1 ){\n            this.main.getComponent(MainScene).getCoin(other.node);\n            \n        }else{\n            // 有无技能\n            if( this.birdData.skillNum > 0 ){\n                this.reLifeView.active = true;  //用技能吗？\n\n            }else{\n                this.main.getComponent(MainScene).gameOver(); \n            }\n        }   \n    }   \n    //水平移动\n    protected heroMoveHor(){\n        if( !GameManager.I.gameFlag ){\n            return;\n        }\n        this.node.x+=this.horSpeed;\n    }\n    // 跳跃\n    public jump(){\n        this.downSpeed = 0;\n        switch(GameManager.I.gameType){\n            case GAME_TYPE.UP:\n                this.downSpeed+=GameConfig.UP_G_SPEED\n                break\n            case GAME_TYPE.DOWN:\n                this.downSpeed -=GameConfig.UP_G_SPEED\n                break\n        }\n    }\n    // 下落或者上升\n    protected heroMoveVer(){\n        if( !GameManager.I.gameFlag  ){\n            return\n        }\n        switch(GameManager.I.gameType){\n            case GAME_TYPE.UP:\n                this.downSpeed-=GameConfig.DOWN_G_SPEED\n                break\n            case GAME_TYPE.DOWN:\n                this.downSpeed +=GameConfig.DOWN_G_SPEED\n                break\n        }\n        this.node.y-=this.downSpeed;\n\n        if( this.node.y <= -cc.winSize.height/2 || this.node.y >= cc.winSize.height/2 ){\n            this.main.getComponent(MainScene).gameOver(); \n        }\n    }\n\n    public reset(){\n        this.downSpeed = 0;\n        this.node.y = 0;\n    }\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n    setBg( url:string ){\n        cc.loader.loadRes(url,cc.SpriteFrame,(err,spriteFrame)=>{\n            this.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    } \n\n    setData(val){\n        this.birdData = val\n        this.setBg( val.url )\n    }\n    start () {\n\n    }\n\n    changeRotation(){\n        switch(GameManager.I.gameType){\n            case GAME_TYPE.DOWN:\n                    if(  this.downSpeed < 0 ){\n                        this.node.rotation = 20\n                    }else{\n                        if( this.node.rotation == 0 ){\n                            return;\n                        }else{\n                            this.node.rotation = 0;\n                        }\n                    \n                    }\n                break\n            case GAME_TYPE.UP:\n                if(  this.downSpeed >0 ){\n                    this.node.rotation = 20\n                }else{\n                    if( this.node.rotation == 0 ){\n                        return;\n                    }else{\n                        this.node.rotation = 0;\n                    }\n                }\n                break\n        }\n\n       \n\n    }\n    // update (dt) {}\n\n\n    // // 发动技能\n    // useSkill(){\n        \n\n\n    // }\n\n    // 复活\n    reLife(type:skillOrRelife){\n        // 按钮执行第一次\n        switch( type ){\n            case skillOrRelife.SKILL:\n                this.birdData.skillNum--;\n                this.birdData.relifeNum--;\n                break;\n            case skillOrRelife.RELIFE:\n                this.birdData.relifeNum--;\n        }\n        GameManager.I.gameFlag = true;\n        this.reLifeView.active = false;\n    }\n    // 放弃复活\n    loseLife(){\n        this.main.getComponent(MainScene).gameOver();\n        this.reLifeView.active = false;\n    }\n}\n"]}